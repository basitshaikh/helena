- label_width = "#{60 / question.labels.count}%"

.radio_matrix.form-group{ class: "#{'has-error' if errors.present?}" }
  .hidden-xs.table-responsive
    %label{class: "#{'text-danger' if errors.present?}"}
      != question.question_text
      = ' *' if question.required
    %table.table
      %thead
        %tr
          %th
          - question.labels.each do |label|
            %th{ width: label_width }
              = label.text
          %th

      %tbody
        - question.sub_questions.each do |sub_question|
          %tr
            %td.text-right
              = sub_question.parts.first
              - if errors[sub_question.code]
                .help-block.text-danger= errors[sub_question.code]
            - question.labels.each do |label|
              - checked = answers[sub_question.code].to_s == label.value.to_s if answers[sub_question.code].present?
              - checked ||= (label.preselected? ? true : false)
              %td{ width: label_width }
                %label
                  = form.simple_fields_for :answers do |answer_form|
                    = answer_form.radio_button sub_question.code, label.value, checked: checked
                  %span.hide-text= label.text
            %td
              = sub_question.parts.last if sub_question.splitted?
  .visible-xs
    - question.sub_questions.each do |sub_question|
      %label{class: "#{'text-danger' if errors.present?}"}
        != question.question_text
        = ' *' if question.required
      %table.table.well
        %tbody
          %tr
            %td.part{colspan: 2}= sub_question.parts.first
            - question.labels.each do |label|
              %tr
                - checked = answers[sub_question.code].to_s == label.value.to_s if answers[sub_question.code].present?
                - checked ||= (label.preselected? ? true : false)
                %td
                  %label.responsive_label
                    = form.simple_fields_for :answers do |answer_form|
                      .col-xs-1
                        = answer_form.radio_button sub_question.code, label.value, checked: checked
                      .col-xs-11
                        = label.text
            - if sub_question.splitted?
              %tr
                %td.part{colspan: 2}= sub_question.parts.last
